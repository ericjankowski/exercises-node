From chapter 3 of Node.js in Action.

This example evolves over the course of the chapter.